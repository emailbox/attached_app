<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

	<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="icon" type="image/x-icon" href="favicon.ico">

	<!--<meta name="apple-mobile-web-app-capable" content="yes" />-->

	<title>
		Attached, by Emailbox
	</title>

	<!--<script src="https://trigger.io/catalyst/target/target-script-min.js#ACBDF007-3B18-4194-9B6B-7FF6F802821C"></script>-->
	<script type="text/javascript">

		var forge_enabled_if_available = true;

		// Testing Forge usage
		var useForge = false;
		if(typeof forge !== 'undefined' && forge_enabled_if_available){
			useForge = true;
			forge.enableDebug();
		}

		var usePg = false;

	</script>

	<!--
	<link rel="stylesheet/less" type="text/css" href="css/less/bootstrap.less">
	-->

	<script src="https://listen.getemailbox.com/socket.io/socket.io.js"></script>
	<script type="text/javascript" src="//api.filepicker.io/v1/filepicker.js"></script>

	<link href="css/bootstrap.css" type="text/css" rel="stylesheet"> <!-- Uncomment below if switching to Less-compiled -->

	<!-- Extra.css needs to be below less compiler -->
	<link href="css/extra.css" type="text/css" rel="stylesheet">
	<link href="css/jqcloud.css" type="text/css" rel="stylesheet">

	<script src="js/app/creds.js"></script>

	<script src="js/libs/jquery-1.7.2.min.js"></script>
	<script src="js/libs/jquery-ui-1.8.21.custom.min.js"></script>
	<script src="js/libs/modernizr.2.6.2.dev.js"></script>
	<script src="js/libs/json2.js"></script>
	<script src="js/libs/dateFormat.js"></script>
	<script src="js/libs/underscore-1.3.3.min.js"></script>
	<script src="js/libs/handlebars-1.0.0.beta.6.js"></script>

	<script src="js/libs/backbone-1.0.0.js"></script>
	<script src="js/libs/backbone.localStorage-min.js"></script>
	<script src="js/libs/burry.js"></script>
	<script src="js/libs/backbone.cachingsync.js"></script>

	<script src="js/libs/json-formatter.js"></script>
	<script src="js/libs/date.js"></script>
	<!-- http://momentjs.com/  would be an alternative -->

	<script src="js/bootstrap/bootstrap-modal.js"></script>

	<!--<script src="js/libs/jquery.ajaxQueue.js"></script>-->
	<script src="js/libs/jquery.ajaxManager.js"></script>
	<script src="js/libs/jquery.base64.js"></script>
	<script src="js/libs/jquery-ui-1.8.21.custom.min.js"></script>
	<script src="js/libs/jquery.wookmark.min.js"></script>
	<script src="js/libs/jquery.hoverzoom.js"></script>
	<!--<script src="js/libs/jquery.masonry-2.1.05.min.js"></script>-->
	<script src="js/libs/jquery.imagesloaded.min.js"></script>

	<!-- FancyBox -->
	<script src="js/libs/jquery.mousewheel-3.0.6.pack.js"></script>
	<link rel="stylesheet" href="js/libs/fancybox//jquery.fancybox.css?v=2.1.3" type="text/css" media="screen" />
	<script type="text/javascript" src="js/libs/fancybox/jquery.fancybox.pack.js?v=2.1.3"></script>

	
	<!-- <script src="libs/jquery.toObject.js"></script> -->

	<script src="js/libs/less-1.3.0.min.js"></script>

	<!--<script src="https://static.firebase.com/v0/firebase.js"></script>-->

	<script src="js/app/app.js"></script>
	<script src="js/app/utils.js"></script>
	<script src="js/app/plugins.js"></script>
	<script src="js/app/models.js"></script>
	<script src="js/app/collections.js"></script>
	<script src="js/app/views.js"></script>
	<script src="js/app/routes.js"></script>
	<script src="js/app/helpers.js"></script>


	<script>

		$(document).ready(function(){
			App.init();
		});

	</script>


	<!-- Templates -->



	<!-- Body Login -->
	<script id="t_body_login" type="text/x-handlebars-template">

		<div class="container">

			<div class="intro_window">

				<h1>
					Attached, by Emailbox
				</h1>

				<br />

				<p style="color:#666;">
					Easily create public links for your email attachments
				</p>

				<hr>

				<div id="intro_steps" class="clearfix">
					<div class="left">
						<p>
							Receive files in email
						</p>
						<img src="/images/s1v1.png" />
					</div>
					<div class="middle">
						<p>
							Drag to a public collection
						</p>
						<img src="/images/s2v1.png" />
					</div>
					<div class="right">
						<p>
							Share a custom URL
						</p>
						<img src="/images/s3v1.png" />
					</div>
				</div>

				<br />
				
				<p style="color:#666;">
					Collections look like <a href="/mahout" target="_blank">/mahout</a>
					<!-- or <a href="/second" target="_blank">/second</a>, or even <a href="/third" target="_blank">/third</a>-->
				</p>

				<hr>

				<p class="login">
					<button class="btn btn-info btn-large">Login with Emailbox</button>
				</p>

			</div>

		</div>

	</script>


	<!-- Default Home View -->
	<script id="t_body" type="text/x-handlebars-template">

		<div id="header" class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="brand" href="index.html">Attached</a>
					
					<a href="#logout" class="btn btn-default pull-right">
						Logout
					</a>
				</div>
			</div>
		</div>

		<div class="body_container nudge_down">

			<div id="files">

			</div>

			<div id="collections">

			</div>

		</div>

	</script>


	<script id="t_files" type="text/x-handlebars-template">

		<h1>
			Files 
			<small class="xsmall">
				Drag-n-drop to Collection
			</small>
		</h1>

		<div class="file_list_holder">
			<ul id="file_list">

				{{#if this}}

					{{#each this}}

						<li class="item clearfix" data-email-id="{{Email._id}}" data-pos="{{pos}}">
							<div class="preview-dialog drag-hide">
								{{#if File.thumbs.basewidth300.path}}
									<img class="preview" src="{{File.thumbs.basewidth300.path}}" />
								{{else}}
									<a href="#" class="preview btn btn-default">Preview</a>
								{{/if}}
							</div>
							<div class="fileinfo">
								<p class="filename" data-filename="{{File.name}}" data-filepath="{{File.path}}">
									{{File.name}}
								</p>
							</div>
							<div class="save-dialog drag-hide">
								<a href="#" class="save btn btn-default">Save</a>
							</div>

						</li>

					{{/each}}
				{{else}}

					<li class="missing">
						<strong>Attachments</strong> will appear here
					</li>

				{{/if}}
			</ul>
		</div>

	</script>

	<script id="t_preview_file" type="text/x-handlebars-template">
		<div class="preview_file" style="display:none;">
			{{#if File.thumbs.basewidth300.path}}
				<img src="{{File.thumbs.basewidth300.path}}" alt="" />
			{{else}}
				Unable to preview this document type
			{{/if}}
		</div>
	</script>

	<script id="t_collections" type="text/x-handlebars-template">
		
		<h1>
			Collections 
			
			<a href="#" class="new_collection btn btn-primary btn-mini">
				New Public Collection
			</a>
			
		</h1>

		<div class="collection_list">
			{{#if this}}
				{{#each this}}
					{{> t_collection_in_collection_parent}}
				{{/each}}
			{{else}}

				<div class="collection new">
					<ol>
						<li>
							Email yourself an attachment (like a picture)
						</li>
						<li>
							Click <a href="#" class="new_collection btn btn-primary btn-mini">New Public Collection</a> to create a New Collection
						</li>
						<li>
							Drag the file from the left to your newly-created Collection
						</li>
					</ol>
				</div>

			{{/if}}
		</div>
	
	</script>

	<script id="t_collection_in_collection_parent" class="partial" type="text/x-handlebars-template">
		<div class="collection fade-in" data-collection-id="{{AppFilemessCollection._id}}">
			{{> t_collection_in_collection}}
		</div>
	</script>

	<script id="t_collection_in_collection" class="partial" type="text/x-handlebars-template">

			<p class="key">
				<a href="http://attached.getemailbox.com/{{AppFilemessCollection.key}}" target="_blank">
					<span>/</span><span>{{AppFilemessCollection.key}}</span>
				</a>
			</p>
			
			<h4 class="title">
				{{AppFilemessCollection.title}}&nbsp;
			</h4>
		

			<hr>
			<div class="files">
				{{#each_with_index AppFilemessCollection.files}}
					{{> t_file_in_collection}}
				{{/each_with_index}}
				{{#Empty AppFilemessCollection.files}}
					{{> t_no_files}}
				{{/Empty}}
			</div>

	</script>

	<script id="t_no_files" class="partial" type="text/x-handlebars-template">
		<div class="no_files">
			Drag files here
		</div>
	</script>

	<script id="t_file_in_collection" class="partial" type="text/x-handlebars-template">

		<div class="file" data-pos="{{index}}" data-path="{{attachment.path}}">
			<a href="#" class="remove" title="remove">-</a>
			<span class="name ellipsis" title="{{attachment.name}}">{{attachment.name}}</span>
		</div>

	</script>

	<!-- Intro template -->
	<script id="t_modal_intro" type="text/x-handlebars-template">
		<div class="modal hide" id="modalIntro">
			<div class="modal-body">
				<h3>Welcome to "Attached"</h3>
			</div>
		</div>
	</script>


	<!-- Toast template -->
	<script id="t_toast" type="text/x-handlebars-template">
		
		<div class="toast-bg">
			{{message}}
		</div>

	</script>

	<!-- online-status template -->
	<script id="t_online_status" type="text/x-handlebars-template">
		<div class="online-status-bg">
			Connection Interrupted
		</div>
	</script>

	<!-- Debug Messages template -->
	<script id="t_debug_messages" type="text/x-handlebars-template">
		<div id="debug-messages">
			{{#compare_size this ">" 0}}
				<div class="debug-messages-bg">
					{{#each this}}
						<div class="debug-message">
							{{text}} <span class="timeago" title="{{datetime}}"></span>
						</div>
					{{/each}}
				</div>
			{{/compare_size}}
		</div>
	</script>
	<script id="t_debug_messages_production" type="text/x-handlebars-template">
		{{#compare_size this ">" 0}}
			<div id="debug-messages" class="production fade-in">
				
				<ul class="spinner">
					<li></li>
					<li></li>
					<li></li>
					<li></li>
				</ul>
				
			</div>
		{{/compare_size}}
	</script>


</head>
<body>

</body>
</html>
